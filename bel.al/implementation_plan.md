# خطة تنفيذ مشروع إدارة السوشيال ميديا (Social Media Manager)

## الهدف
بناء أداة بسيطة باستخدام **FastAPI** و **Python** لإدارة حسابات فيسبوك، إنستجرام، وتيليجرام من مكان واحد. الأداة ستسمح بالنشر الموحد والرد الذكي (AI) على الرسائل والتعليقات.

## مراجعة المستخدم مطلوبة (User Review Required)
> [!IMPORTANT]
> **مطلوب توفير مفاتيح API:** لكي يعمل المشروع، ستحتاج لإنشاء حسابات مطورين (Developer Accounts) على فيسبوك وتيليجرام. سأقوم بكتابة الكود، لكن ستحتاج أنت لاستخراج المفاتيح (Tokens) وإدخالها في الأداة.
>
> **بخصوص الذكاء الاصطناعي:** سأقوم بدمج `Gemini API` (بما أنه مجاني وقوي حالياً) للردود الذكية. هل هذا مناسب؟

## التغييرات المقترحة (Proposed Changes)

### هيكل المشروع (Project Structure)
سنقوم بإنشاء مجلد جديد `social_manager` يحتوي على:

#### [NEW] `main.py`
- ملف التشغيل الرئيسي لـ FastAPI.
- يحتوي على الـ Routes الأساسية (الصفحة الرئيسية، استقبال الـ Webhooks).

#### [NEW] `config.py`
- إدارة المتغيرات البيئية (API Keys, Tokens).

#### [NEW] `services/`
- **`facebook_service.py`**: دوال للنشر على فيسبوك والرد على التعليقات.
- **`instagram_service.py`**: دوال للنشر والرد على الرسائل (Direct) والتعليقات.
- **`telegram_service.py`**: دوال للنشر والرد عبر الـ Bot.
- **`ai_service.py`**: 
    - تصميم مرن (Flexible Architecture) يعتمد على `BaseAIProvider`.
    - تنفيذ `GeminiProvider` كخيار افتراضي حالياً.
    - سهولة إضافة `OpenAI`, `Claude`, `Bing` مستقبلاً عن طريق إضافة كلاس جديد فقط.

#### [NEW] `templates/index.html`
- واجهة بسيطة جداً (HTML/CSS) لعرض الحالة وربط الحسابات وإرسال بوست جديد يدويًا.

### تفاصيل التنفيذ (Implementation Details)

1.  **الواجهة (UI):** صفحة واحدة تحتوي على:
    - فورم لإدخال الـ Access Tokens (بدلاً من تعقيدات الـ OAuth Login في البداية، سنعتمد على الـ Long-lived Tokens لتبسيط الأمر عليك).
    - فورم "نشر جديد": تكتب البوست مرة واحدة وتختار المنصات.
    - سجل بسيط (Log) يعرض الردود التي قام البوت بإرسالها.

2.  **الرد الذكي (Auto-reply):**
    - سنقوم بعمل `Webhook` يستقبل الإشعارات من فيسبوك/إنستجرام/تيليجرام.
    - عند وصول رسالة/تعليق -> نرسل النص لـ AI -> نأخذ الرد -> نرسله للمستخدم.

## خطة التحقق (Verification Plan)

### التحقق اليدوي
- **تشغيل السيرفر:** التأكد أن `uvicorn main:app --reload` يعمل بدون أخطاء.
- **اختبار تيليجرام:** أسهل منصة للبدء. سنقوم بإنشاء بوت وإرسال رسالة له للتأكد من الرد.
- **اختبار الواجهة:** فتح المتصفح والتأكد من إمكانية حفظ الإعدادات.

### التحقق الآلي
- كتابة سكريبت بسيط `test_connection.py` يجرب الاتصال بال APIs للتأكد من صحة المفاتيح.
